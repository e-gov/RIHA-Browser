<section class="col card p-3 main-content">
  <div class="panel-action-heading">
    Kooskõlastamisel infosüsteemid
  </div>
  <div class="my-1 card-content col-lg-10">
    <div *ngIf="loaded" class="table-responsive">
      <app-grid-total-found [gridData]="gridData"></app-grid-total-found>
      <table id="infosystems-table" class="table table-striped table-bordered dataTable" cellspacing="0" width="100%">
        <thead class="thead-default">
        <th>
          <app-sort-button
            [labelText]="'Lühinimi'"
            [sortProperty]="'short_name'"
            [gridData]="gridData"
            (buttonClick)="onSortChange($event)"></app-sort-button>
        </th>
        <th>
          <app-sort-button
            [labelText]="'Infosüsteemi nimi'"
            [sortProperty]="'name'"
            [gridData]="gridData"
            (buttonClick)="onSortChange($event)"></app-sort-button>
        </th>
        <th>
          <app-sort-button
            [labelText]="'Kooskõlastamine'"
            [sortProperty]="'last_positive_approval_request_type'"
            [gridData]="gridData"
            (buttonClick)="onSortChange($event)"></app-sort-button>
        </th>
        <th>
          <app-sort-button
            [labelText]="'Kooskõlastamisele esitamise kuupäev '"
            [sortProperty]="'topics'"
            [gridData]="gridData"
            (buttonClick)="onSortChange($event)"></app-sort-button>
        </th>
        </thead>
        <tbody>
        <tr *ngFor="let system of gridData.content">
          <td class="name"><a [routerLink]="['/Infosüsteemid/Vaata', system.details.short_name]">{{system.details.short_name}}</a></td>
          <td class="name"><a [routerLink]="['/Infosüsteemid/Vaata', system.details.short_name]">{{system.details.name}}</a></td>
          <td class="approval-status">{{ generalHelperService.getApprovalStatusText(system) }}</td>
          <td class="approval-date">{{system.details.name}}</td>
        </tr>
        </tbody>
      </table>
      <div class="pull-right">
        <app-grid-currently-showing [gridData]="gridData"></app-grid-currently-showing>
        <ngb-pagination
          class="pull-right"
          (pageChange)="onPageChange($event)"
          [pageSize]="gridData.size"
          [maxSize]="5"
          [collectionSize]="gridData.getSize()"
          [page]="gridData.getPageNumber()">
        </ngb-pagination>
      </div>
      <a *ngIf="userMatrix.hasDescriberRole" class="btn btn-primary" [routerLink]="['/Kirjelda/Uus']">Lisa uus</a>
    </div>
    <div *ngIf="!loaded" class="my-1 text-center">
      <i class="fa fa-spinner fa-3x fa-spin" aria-hidden="true"></i>
    </div>
  </div>
</section>
